<div class="min-h-screen bg-[#F8FAFC]">
  <app-header title="Active Orders" [showBackButton]="true" backRoute="/dashboard"></app-header>

  <main class="max-w-7xl mx-auto p-6 animate-fade-in">
    @if (isLoading()) {
      <div class="flex items-center justify-center py-20">
        <div class="text-surface-400 font-bold">Loading orders...</div>
      </div>
    } @else {
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
        @for (order of orders(); track order.id) {
          <div
            (click)="openOrder(order)"
            class="glass-card p-6 cursor-pointer hover:ring-4 hover:ring-primary-100 transition-all duration-300 group relative overflow-hidden"
          >
            <div class="relative z-10">
              <div class="flex justify-between items-start mb-4">
                <div class="font-black text-2xl text-surface-900">
                  #{{ order.orderNumber.slice(-4) }}
                </div>
                <div
                  class="px-3 py-1 bg-surface-100 rounded-full text-xs font-bold text-surface-600 uppercase"
                >
                  {{ orderTypes()[order.typeId] }}
                </div>
              </div>

              <div class="space-y-2 mb-6">
                @if (order.tableId) {
                  <div class="flex items-center gap-2 text-surface-600 font-medium">
                    <span>ğŸª‘ Table {{ order.tableId }}</span>
                  </div>
                }

                <div class="flex items-center gap-2 text-surface-600 font-medium">
                  <span>ğŸ•’ {{ order.createdAt | date: 'shortTime' }}</span>
                </div>

                @if (order.customerName) {
                  <div class="flex items-center gap-2 text-surface-600 font-medium">
                    <span>ğŸ‘¤ {{ order.customerName }}</span>
                  </div>
                }
              </div>

              <div class="flex items-center justify-between pt-4 border-t border-surface-100">
                <div class="font-black text-xl text-primary-600">â‚¬{{ order.total.toFixed(2) }}</div>
                <div
                  class="px-3 py-1 rounded-full text-xs font-bold uppercase"
                  [ngClass]="{
                    'bg-green-100 text-green-700': orderStatuses()[order.statusId] === 'READY',
                    'bg-blue-100 text-blue-700': orderStatuses()[order.statusId] === 'SERVED',
                    'bg-orange-100 text-orange-700':
                      orderStatuses()[order.statusId] === 'PREPARING',
                    'bg-surface-100 text-surface-700': orderStatuses()[order.statusId] === 'OPEN',
                    'bg-indigo-100 text-indigo-700':
                      orderStatuses()[order.statusId] === 'OUT_FOR_DELIVERY',
                  }"
                >
                  {{ orderStatuses()[order.statusId] }}
                </div>
              </div>
            </div>

            <div
              class="absolute -right-4 -bottom-4 opacity-5 group-hover:opacity-10 transition-opacity"
            >
              <div class="text-9xl">ğŸ§¾</div>
            </div>
          </div>
        } @empty {
          <div
            class="col-span-full flex flex-col items-center justify-center py-20 text-surface-400"
          >
            <div class="text-6xl mb-4">ğŸ“</div>
            <div class="text-xl font-bold">No active orders</div>
          </div>
        }
      </div>
    }
  </main>
</div>
